# Network Lines

> 네트워크 회선에 대해 알아보아요
>
> Reference: [책] IT 엔지니어를 위한 네트워크 입문

<br>

<br>

- 원격지 network에 연결하기 위해서는 **WAN**을 사용해야 한다
  - WAN에서 **통신사업자**와 **사용자**를 연결해주는 다양한 종류의 network 회선과 기술이 사용되어 왔지만, 현재는 **LAN**과 동일하게 `Ethernet`이 주로 사용된다
- 일반적인 `Ethernet` 외에 특별한 용도로 **음성 회선 기반**의 **저속 회선기술**이나 통신 사업자 간의 **고속 통신** 또는 가입자 구분/식별 용도로 다양한 기술이 사용된다

<br>

<br>

### 1. 인터넷 회선

- **Internet 접속**을 위해 `통신사업자`와 연결하는 회선을 인터넷 회선이라고 한다
- 통신사업자와 cable만 연결한다고 연결이 가능한 것이 아니라 **통신 사업자가 판매하는 인터넷과 연결된 회선** 을 사용해야만 인터넷 접속이 가능하다
- 일반 가정에서 인터넷에 연결하기 위해 사용하는 기술은 뒤에 나오는 `전용 회선`과는 전송 기술이 약간 다르다
  - **가입자**와 **통신사업자**가 직접 연결되는 구조가 아니라, **전송 선로 공유 기술**을 사용한다
    - ex) 
      - 아파트 광랜은 내부 선로가 직접 연결되는 구조여서 인터넷 전용 회선 처럼 보이지만,
        - 아파트에서 통신사업자까지 연결한 회선을 아파트 가입자가 **공유**하는 구조이다
  - **전송 선로를 공유** 하므로 일반 인터넷 회선의 속도는 전송 가능한 최대 속도이고, 속도를 보장하지 않는다
    - 즉, 주변 사용량에 따라 속도가 느려질 수 있다

<br>

#### 일반 인터넷 회선의 종류

- 광랜 (Ethernet)
  - 기가 ~ 100Mbps
- FTTH
  - 기가 ~ 100Mbps
- 동축 케이블 인터넷
  - 수백 ~ 수십 Mbps
- xDSL (ADSI, VDSL 등)
  - 수십 ~ 수 Mbps

<br>

- 위의 인터넷 접속 기술은 기존 전화선을 사용하거나 특정 구간부터 **다른 사용자와 공유**된다
- 항상 모든 사람이 최대로 인터넷을 접속하는 것은 아니므로 **공유 구간**은 **사용자 최대 속도를 보장하지 않도록** 구축하는 것이 일반적이다

<br>

<br>

### 2. 전용 회선 (Leased Line)

- `가입자`와 `통신사업자` 간에 **대역폭을 보장**해주는 서비스를 대부분 **전용 회선**이라고 부른다
- `가입자`와 `통신사업자` 간에는 **전용 케이블**로 연결되어 있고, 통신사업자 내부에서 **TDM (시분할 다중화: Time Division MUltiplexing)** 같은 기술로 마치 **직접 연결한 것처럼** 통신 품질을 보장한다
- `인터넷 전용 회선`이 아닌 `일반 전용 회선`은 **본사-지사 연결**에 주로 사용된다

<br>

전용 회선을 `가입자`와 접속하는 `전송 기술`을 기반으로 구분한다면 **음성 전송 기반**의 **저속 회선**과 **Metro Ethernet**이라는 **고속 회선**으로 분류할 수 있다

<br>

#### 2-1. 음성 전송 기술 기반 저속 회선

- 저속 음성 전송 기술은 **64kbps** 단위로 구분되어 사용된다
- **작은 기본 단위**를 **묶어** 회선 **접속 속도를 높이는 방법**으로 발전되어 온 기술로 오랫동안 사용되어 왔다
- 보통 **높은 속도를 필요하지 않을 때** 혹은 **높은 신뢰성이 필요할 때** 사용되어 왔지만,
  - 현재는 Ethernet 기반의 광 전송 기술이 신뢰할 정도의 수준으로 발전해 점점 사용 빈도가 줄고 있다
    - but, 결재 승인과 같은 전문 `(Clear Text) 전송`을 위한 **VAN(Value Added Network)**시나 **대외 연결**에는 저속 회선을 사용하는 경우가 많다 
- 저속 음성 전송 기술을 사용하려면 **원격지 전송 기술로 변환** 할 수 있는 `Router`가 필요하다

<br>

#### 2-2. Metro Ethernet 고속 회선

- 고속 연결은 대부분 **광케이블 기반**의 `Ethernet`을 사용한다
- 가입자와 통신사업자 간의 기술은 `Ethernet`을 사용하고, **통신사업자 내부**에서는 이런 개발 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술을 사용한다
  - 가입자와 통신사업자 내부에서의 통신 기법이 다른 이유는 통신사업자는 **여러 가입자를 구분**하고, 가입자 **traffic**을 **고속**으로 전송하는 것이 중요하기 때문이다
  - 또한, 다양한 가입자 접속 기수을 하나의 기술로 **통합**하기 위한 기술이 사용된다
    - why?
      - 저속 통신 회선이나 Ethernet, 음성을 한의 회선에 실을 수 있게!

<br>

`+`

#### LLCF (Link Loss Carry Foward)

- LLCF는 한쪽 link가 다운되면 이를 **감지**해 반대쪽 link도 다운시키는 기능이다
- 전용 회선을 `Ethernet`으로 구성할 때 회선사에서 `LLCF`를 설정하지 않으면 전용 회선이 한 사이트에서 다운되더라도, 반대쪽에서는 사이트에서는 회선이 그대로 살아있는 것처럼 보이게 된다
  - 회선 개통 후 `LLCF` 설정이 되어 있는지 확인해야 한다!
- 단, 저속 회선은 **2계층 protocol** 통신 상태를 확인하는 긴으이 있으므로 `Router`에서 상대방 link가 끊길 경우 감지할 수 있어 `LLCF` 설정이 필요 없다!

<br>

<br>

### 3. 인터넷 전용 회선  (Internet Leased Line)

- 인터넷 연결 회선에 대한 **통신 대역폭**을 **보장**해주는 상품을 `인터넷 전용회선`이라고 한다
  - `가입자`가 `통신사업자`와 연결되고, 이 연결이 다시 인터넷과 연결되는 구조이다
- 인터넷 전용 회선은 가입자가 일반가정에서 사용하는 접속 기술과 달리 **다른 가입자와 경쟁하지 않고** `통신사업자`와 `가입자` 간의 **연결 품질을 보장**해준다
- 최근 인터넷 전용 회선 기술은 `Ethernet`이 가장 많이 쓰인다
  - `Metro Ethernet`이라는 이 기술은 수 ~ 수십 kmㄲ지 전송할 수 있는 최근의 Ethernet 기술을 바탕으로 하고 있다

<br>

<br>

### 4. VPN (Virtual Private Network)

- VPN은 물리적으로는 전용이 아니지만 **가상**으로 **연결한 것 같은 효과가 나도록** 만들어주는 network 기술이다
- 다양한 VPN 기술이 있고 `가입자 입장`에서의 기술과 `통신사업자 입장`에서의 기술이 별도로 발전해왔다

<br>

#### 4-1. 통신사업자 VPN

- `전용선`은 **연결거리가 늘어날수록 비용이 증가**한다
  - 도시 내의 전용선 연걸은 비싸지 않지만 타 도시나 해외 연결 전용선은 매우 비싸다
  - 사용 가능한 대역폭을 보장해주지만 가입자가 계약된 대역폭을 항상 100% 사용하는 것이 아니어서 **낭비**되는 비용이 클 수 있다
- 이런 비용 낭비를 줄이기 위해 **통신사업자가 직접 가입자를 구분** 할 수 있는 VPN 기술을 사용해 비용을 낮추고 있다
  - 가장 대표적인 VPN 기술이 **MPLS VPN**이다
    - **MPLS VPN**
      - 여러 가입자가 하나의 MPLS 망에 접속되지만 **가입자를 구분**할 수 있는 기술을 적용해 **전용선처럼** 사용할 수 있다
      - 이 기술을 사용하면 **여러 가입자**가 **하나의 망에 접속**해 통신하므로 공용 회선을 함께 이용하게 되어 **비용이 낮아**진다
      - 전용 회선 비용은 `거리`와 `속도`에 영향을 받지만 MPLS VPN 회선은 거리보다 `속도`의 영향을 받으므로,
        - **거리가 멀어질수록** MPLS와 같은 **공용망 기술** 사용이 비용을 낮추는 데 도움이 된다
      - 도시 내부의 통신 외에 `본사-지사` 또는 `지사-지사` 간의 연결은 대부분 MPLS VPN 기술을 사용해 연결한다
        - 사용자 입장에서는 기술적으로 특별히 고려할 것이 없으므로 **일반 전용선**과 동일한 접속 기술을 사용하게된다

<br>

#### 4-2. 가입자 VPN

- 일반 사용자가 VPN을 사용한다면 대부분 가입자 VPN 기술이다
- 일반 인터넷망을 이용해 **사용자가 직접 가상 전용 Network**를 구성해 사용할 수 있다
- 지방이나 해외를 전용선으로 연결하면 비용이 매우 비싸고 앞에서 알아본 MPLS VPN 기술 이용한 회선도 일반 인터넷 연결보다 비싸다
  - 그래서 비용을 낮추기 위해 **일반 인터넷 연결을 이용한 VPN**을 사용한다

<br>

<br>

### 5. DWDM (Dense Wavelength Division Multiplex)

- `파장 분할 다중화` 기술은 **먼 거리**를 통신할 때 cable **포설 비용**이 많이 들고 **관리가 어려운** 문제를 극복하기 위해 개발되었다  

- **WDM** 기술이 나오기 저에는 **하나의 광 케이블에 하나의 통신**만 가능했다

  - `WDM`
    - 사용되는 신호 (빛)의 파장을 분할하는 장치

- 통신사업자는 많은 가입자를 **구분**하고 **높은 대역폭**의 통신을 제공해야 하므로 **여러 개의 cable**을 포설해야 했고, 이러한 물리적인 cable을 포설하는 데 어려움이 있었다

  - `WDM`과 `DWDM` 기술을 **하나의 광케이블**에 **다른 파장의 빛**을 이용해 **여러 채널**을 만드는 동시에 **많은 데이터**를 **전송**할 수 있다

- `DWDM` 전송 기술은 기존 `WDM` 보다 더 많은 채널을 이용하는 기술이다

  - 이 기술은 **통신 사업자 내부**에서 **먼 거리를 통신**할 때 주로 사용되지만, 최근에는 일반 가정에서 사용하는 **기가 인터넷**에서도 사용되고 있다

    

