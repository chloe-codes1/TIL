# Django REST API with JSON web token (JWT)

> Authenticate with JWT!

<br>

<br>

## I. Prerequisites

<br>

### 1. Install REST framework JWT Auth package

- Package official documentation: <https://jpadilla.github.io/django-rest-framework-jwt/>

```bash
pip install djangorestframework-jwt
```

<br>

<br>

### 2. Change `settings.py` configuration

<br>

#### (1) Change `REST_FRAMEWORK` configuration

- Add content below the `REST_FRAMEWORK` configuration variable
- Means setting authentication method to JSONWebTokenAuthentication method

```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework_jwt.authentication.JSONWebTokenAuthentication',  # Replace from Token
        # 'rest_framework.authentication.TokenAuthentication',
    ]
}
```

<br>

#### (2) Add `REST_USE_JWT` configuration

- Add configuration for DRF auth to use JWT

```python
REST_USE_JWT = True
```

<br>

#### (3) Add `JWT_AUTH` configuration

- JWT related information configuration (example)
- For details, refer to official documentation (<https://jpadilla.github.io/django-rest-framework-jwt/>)

```python
import datetime
JWT_AUTH = {
    'JWT_SECRET_KEY': SECRET_KEY,
    'JWT_ALGORITHM': 'HS256',
    'JWT_ALLOW_REFRESH': True,
  # Token valid for 1 week
    'JWT_EXPIRATION_DELTA': datetime.timedelta(days=7),
  # Renewed every 28 days (when extending validity period)
    'JWT_REFRESH_EXPIRATION_DELTA': datetime.timedelta(days=28),
}
```

<br>

<br>

## II. All changes

<br>

### `settings.py`

```python
# DRF auth settings
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework_jwt.authentication.JSONWebTokenAuthentication',  # Replace from Token
        # 'rest_framework.authentication.TokenAuthentication',
    ]
}

# Configuration for DRF auth to use JWT
REST_USE_JWT = True

# JWT Token related information configuration: What information to include
import datetime
JWT_AUTH = {
    'JWT_SECRET_KEY': SECRET_KEY,
    'JWT_ALGORITHM': 'HS256',
    'JWT_ALLOW_REFRESH': True,
  # Token valid for 1 week
    'JWT_EXPIRATION_DELTA': datetime.timedelta(days=7),
  # Renewed every 28 days (when extending validity period)
    'JWT_REFRESH_EXPIRATION_DELTA': datetime.timedelta(days=28),
}
``` 
